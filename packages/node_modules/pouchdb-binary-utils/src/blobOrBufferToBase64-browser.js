function blobToBase64(blobOrBuffer, callback) {
  if (blobOrBuffer.size) {
    var reader = new FileReader();
    reader.onloadend = function (e) {
      const text = e.target.result || '';
      const base64 = text.split(',')[1];
      callback(base64);
    };
    reader.readAsDataURL(blobOrBuffer);
  } else {
    const base64 = blobOrBuffer.toString('base64');
    setImmediate(() => callback(base64));
  }
}

export default blobToBase64;
